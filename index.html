<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Анализ вашего магазина на WB/Ozon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
            overflow: hidden;
        }
        .background-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(88, 166, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(88, 166, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: pulse 5s ease-in-out infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.1; }
            50% { opacity: 0.3; }
            100% { opacity: 0.1; }
        }
        .card {
            background-color: rgba(22, 27, 34, 0.8);
            border: 1px solid #30363d;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 35px rgba(88, 166, 255, 0.2);
        }
        .neon-title {
            color: #f0f6fc;
            text-shadow: 0 0 8px rgba(88, 166, 255, 0.7), 0 0 20px rgba(88, 166, 255, 0.5);
        }
        .neon-button {
            box-shadow: 0 0 10px rgba(88, 166, 255, 0.7), 0 0 25px rgba(88, 166, 255, 0.5);
        }
        .progress-bar-container {
            width: 100%;
            background-color: #30363d;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #58a6ff, #ff7b72);
            width: 0%;
            transition: width 3s ease-out;
            border-radius: 10px;
            box-shadow: 0 0 15px #58a6ff;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div class="background-grid"></div>
    <div class="relative card p-8 md:p-12 w-11/12 max-w-2xl text-center">

        <!-- Step 1: URL Input -->
        <div id="step1">
            <h1 class="text-3xl md:text-4xl font-black mb-4 neon-title">AI-анализ вашего магазина за 60 секунд</h1>
            <p class="text-lg text-gray-400 mb-8">Найдите 3 ключевые ошибки, из-за которых вы теряете деньги. Бесплатно и без регистрации.</p>
            <div class="mb-6">
                <input type="text" id="shopUrl" class="w-full bg-[#0d1117] border border-[#30363d] text-white text-lg rounded-lg focus:ring-[#58a6ff] focus:border-[#58a6ff] p-4 placeholder-gray-500" placeholder="Вставьте ссылку на ваш магазин или карточку товара" required>
            </div>
            <button id="startAnalysisBtn" class="w-full bg-[#58a6ff] text-white font-bold text-xl py-4 px-8 rounded-lg hover:bg-opacity-90 transition-all duration-300 neon-button">Запустить AI-Анализ</button>
            <p id="urlError" class="text-red-400 mt-4 hidden">Пожалуйста, вставьте ссылку.</p>
        </div>

        <!-- Step 2: Analysis Progress and Contact Form -->
        <div id="step2" class="hidden">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-300 mb-4">Идет анализ...</h2>
            <div class="progress-bar-container mb-4">
                <div id="progressBar" class="progress-bar"></div>
            </div>
            <p id="analysisText" class="text-lg text-[#58a6ff] mb-8"></p>
            
            <div id="contactForm" class="hidden">
                <h2 class="text-3xl font-bold text-green-400 mb-4">Анализ завершен!</h2>
                 <p class="text-lg text-gray-300 mb-8">Найдено 4 потенциальные "пробоины". Куда отправить вам бесплатный PDF-отчет?</p>
                <div class="space-y-6">
                    <input type="text" id="userName" class="w-full bg-[#0d1117] border border-[#30363d] text-white text-lg rounded-lg focus:ring-[#58a6ff] focus:border-[#58a6ff] p-4" placeholder="Ваше имя" required>
                    <input type="text" id="userContact" class="w-full bg-[#0d1117] border border-[#30363d] text-white text-lg rounded-lg focus:ring-[#58a6ff] focus:border-[#58a6ff] p-4" placeholder="Ваш Telegram или WhatsApp" required>
                </div>
                <button id="getReportBtn" class="w-full mt-8 bg-[#ff7b72] text-white font-bold text-xl py-4 px-8 rounded-lg hover:bg-opacity-90 transition-all duration-300 neon-button">Получить отчет</button>
                <p id="contactError" class="text-red-400 mt-4 hidden">Пожалуйста, заполните все поля.</p>
            </div>
        </div>

        <!-- Step 3: Thank You Page -->
        <div id="step3" class="hidden">
            <h1 class="text-3xl md:text-4xl font-bold text-green-400 mb-4">Отлично! Отчет уже формируется</h1>
            <p class="text-lg text-gray-300 mb-8">Ваш персональный AI-Скан будет отправлен вам в Telegram/WhatsApp в течение 5-10 минут. Меня зовут Николай, я скоро напишу вам лично.</p>
            <a href="https://aiproof500mln.netlify.app/" target="_blank" class="text-[#58a6ff] font-bold text-lg hover:underline">А пока посмотрите, как мы принесли Gulliver Group +500 млн ₽ →</a>
        </div>
    </div>

    <script>
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const startAnalysisBtn = document.getElementById('startAnalysisBtn');
        const getReportBtn = document.getElementById('getReportBtn');
        const shopUrlInput = document.getElementById('shopUrl');
        const urlError = document.getElementById('urlError');
        const contactError = document.getElementById('contactError');
        const progressBar = document.getElementById('progressBar');
        const analysisText = document.getElementById('analysisText');
        const contactForm = document.getElementById('contactForm');

        startAnalysisBtn.addEventListener('click', () => {
            const url = shopUrlInput.value.trim();
            // Simplified validation to ensure the field is not empty
            if (url.length < 5) {
                urlError.classList.remove('hidden');
                return;
            }
            urlError.classList.add('hidden');
            step1.classList.add('hidden');
            step2.classList.remove('hidden');

            const texts = ["Анализируем SEO-структуру...", "Сравниваем визуал с конкурентами...", "Ищем 'пробоины' в отзывах...", "Почти готово..."];
            let i = 0;
            analysisText.textContent = texts[i];
            const interval = setInterval(() => {
                i++;
                if (texts[i]) {
                    analysisText.textContent = texts[i];
                }
            }, 750);

            setTimeout(() => {
                progressBar.style.width = '95%';
            }, 100);

            setTimeout(() => {
                clearInterval(interval);
                analysisText.classList.add('hidden');
                progressBar.parentElement.classList.add('hidden');
                contactForm.classList.remove('hidden');
            }, 3500);
        });

        getReportBtn.addEventListener('click', () => {
            const userName = document.getElementById('userName').value.trim();
            const userContact = document.getElementById('userContact').value.trim();
            const shopUrl = shopUrlInput.value.trim();

            if (!userName || !userContact) {
                contactError.classList.remove('hidden');
                return;
            }
            contactError.classList.add('hidden');

            const leadData = {
                name: userName,
                contact: userContact,
                url: shopUrl,
                timestamp: new Date().toISOString()
            };

            // This is where you would send the data to your webhook (e.g., Make.com)
            console.log('Sending data to webhook:', leadData);
            // Example fetch:
            fetch('[https://hook.eu1.make.com/your-unique-webhook-id](https://hook.eu1.make.com/your-unique-webhook-id)', {
    method: 'POST',
    body: JSON.stringify(leadData),
    headers: { 'Content-Type': 'application/json' }
}).then(response => console.log('Success!', response))
  .catch(error => console.error('Error:', error));
            //     method: 'POST',
            //     body: JSON.stringify(leadData),
            //     headers: { 'Content-Type': 'application/json' }
            // }).then(response => console.log('Success!', response))
            //   .catch(error => console.error('Error:', error));

            step2.classList.add('hidden');
            step3.classList.remove('hidden');
        });
    </script>
</body>
</html>
